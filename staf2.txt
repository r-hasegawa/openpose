docker run -it --rm --gpus all -e DISPLAY=$DISPLAY -e NVIDIA_VISIBLE_DEVICES=0 -v /media/r-hsgw/data/Openpose:/data -v /home/r-hsgw/workspace/openpose:/staf broderickhigby/openpose-staf:latest /bin/bash


./build/examples/openpose/openpose.bin --model_pose BODY_25 --tracking 1 --render_pose 1 --write_video /data/output.avi --write_json output/ --video /data/20200518_a1.MP4


./build/examples/openpose/openpose.bin --video /data/20200518_a1.MP4 --write_video /data/output.avi --write_json output/ --model_pose BODY_21A --render_pose 1 --tracking 1 --display 0

# 先にやっておくこと
git clone -b staf https://github.com/soulslicer/openpose.git
docker run -it --rm --gpus all -e DISPLAY=$DISPLAY -e NVIDIA_VISIBLE_DEVICES=0 -v /media/r-hsgw/data/Openpose:/data -v /home/r-hsgw/workspace/openpose:/staf broderickhigby/openpose-staf:latest /bin/bash

# Docker内
cd /staf
apt update
apt install -y sudo
sudo bash ./scripts/ubuntu/install_deps.sh 
mkdir build
cd build
cmake ..
make -j4 
sudo make install
cd ../models
sh getModels.sh
cd ..

# プログラムの実行
# displayあり
./build/examples/openpose/openpose.bin --model_pose BODY_21A --tracking 1 --render_pose 1 --write_video /data/output/b1.avi --write_json /data/output_json/b1 --display 0 --video /data/input/20200518_b1.MP4 
./build/examples/openpose/openpose.bin --model_pose BODY_21A --tracking 1 --render_pose 1 --write_video /data/output.avi --write_json output/ --video /data/test012.MP4
# displaysuなし

# 新規のイメージ(openpose-staf:latest)から作成
docker run -it --gpus all --net host --name r-hsgw_openpose-staf -e DISPLAY=$DISPLAY -e NVIDIA_VISIBLE_DEVICES=0 -v /media/r-hsgw/data/Openpose:/data -v /home/r-hsgw/workspace/openpose:/openpose openpose-staf:latest /bin/bash

docker start r-hsgw_openpose-staf 

docker exec -it r-hsgw_openpose-staf /bin/bash

# displayあり
./build/examples/openpose/openpose.bin --model_pose BODY_21A --tracking 1 --render_pose 1 --write_video /data/output/b1.avi --write_json /data/output_json/b1 --display 0 --video /data/input/20200518_b1.MP4 
# displayなし
./build/examples/openpose/openpose.bin --model_pose BODY_21A --tracking 1 --render_pose 1 --video /data/input/20200518_b1.MP4 

exit



docker run -it --rm --gpus all --name r-hsgw_openpose-staf2 \
-e DISPLAY=$DISPLAY --net host -v /tmp/.X11-unix:/tmp/.X11-unix -v $HOME/.Xauthority:/root/.Xauthority \
-v /media/r-hsgw/data/Openpose:/data -v /home/r-hsgw/workspace/openpose:/openpose \
openpose-staf:latest /bin/bash


INPUT=0531A4-1_fhd

./build/examples/openpose/openpose.bin --model_pose BODY_21A --tracking 1 --render_pose 1 --video /data/input/$INPUT.mp4

./build/examples/openpose/openpose.bin --model_pose BODY_21A --tracking 1 --render_pose 1 --write_video /data/output/$INPUT.avi --write_json /data/output_json/$INPUT --display 0 --video /data/input/$INPUT.MP4



./build/examples/user_code/usercode.bin --model_pose BODY_21A --tracking 1 --render_pose 1 --write_json /data/output_json/$INPUT --video /data/input/$INPUT.mp4 

./build/examples/user_code/usercode.bin --model_pose BODY_21A --tracking 1 --render_pose 1 --write_json /data/output_json/$INPUT --camera 0

./build/examples/user_code/usercode_nodisplay.bin --model_pose BODY_21A --tracking 1 --render_pose 1 --write_json /data/output_json/$INPUT --video /dev/video0 

docker run -it --rm --gpus all -e DISPLAY=$DISPLAY --net host -v /tmp/.X11-unix:/tmp/.X11-unix -v $HOME/.Xauthority:/root/.Xauthority  --device /dev/video0:/dev/video0  -v /home/r-hasegawa/workplace/openpose:/openpose -v /home/r-hasegawa/data:/data openpose_staf:r-hasegawa /bin/bash



